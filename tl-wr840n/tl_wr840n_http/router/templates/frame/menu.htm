<!DOCTYPE html> 
<script language="javascript" type="text/javascript">
var menuargs = new Array(
	["status", "status.htm", 1, "Status"],
	
	["qs", "qsStart.htm", 1, "Quick Setup"],
	
	/*["sysmod", "sysMode.htm", 1, "Operation Mode"],*/
	
	["network", $.sysMode == "DSL" && "wan.htm" || $.sysMode == "ETH" && "ethWan.htm" || $.sysMode == "USB_3G" && "usb3g.htm", 1, "Network"],
	["wan", $.sysMode == "DSL" && "wan.htm" || $.sysMode == "ETH" && "ethWan.htm" || "no.htm", 2, "WAN"],
	["ewan", INCLUDE_WAN_MODE ? "no.htm" : "ethWan.htm", 2, "WAN"],
	["usb3g",  "usb3g.htm", 2, "3G Settings"],
	/*["group", "group.htm", 2, "Interface Grouping"],*/
	["lan", "lan.htm", 2, "LAN"],
	["iptv", INCLUDE_UN_IPTV ? "ethIptv.htm" : "no.htm", 2, "IPTV"],
	["macclone", "macClone.htm", 2, "MAC Clone"],
	/*["alg", "alg.htm", 2, "ALG Settings"],*/
	/*["dsl", $.sysMode == "DSL" ? "dslcfg.htm" : "no.htm", 2, "DSL Settings"],*/
	["autopvc", $.sysMode == "DSL" ? "autoPVC.htm" : "no.htm", 2, "PVC Auto-detection"],
	["ipsec", "ipsec.htm", 2, "IPSec VPN"],

	/*["iptv", $.sysMode == "DSL" ? "iptv.htm" : "no.htm", 1, "IPTV"],*/

	/*["dualband", "wlFrequency.htm", 1, "Dual Band Selection"],*/

	["wl", "wlBasic.htm", 1, "Wireless"],
	["wlbasic", "wlBasic.htm", 2, "Basic Settings"],
	["wlqss", "wlQss.htm", 2, "WPS"],
	["wlsec", "wlSec.htm", 2, "Wireless Security"],
	/*["wlsche", "wlScheEdit.htm", 2, "Wireless Schedule"],*/
	["wlacl", "wlAcl.htm", 2, "Wireless MAC Filtering"],
	["wladv", "wlAdv.htm", 2, "Wireless Advanced"],
	["wlstat", "wlStats.htm", 2, "Wireless Statistics"],
	
	["wl5g", "wlBasic5G.htm", 1, "Wireless 5GHz"],
	["wlbasic5g", "wlBasic5G.htm", 2, "Basic Settings"],
	["wlqss5g", "wlQss5G.htm", 2, "WPS"],
	["wlsec5g", "wlSec5G.htm", 2, "Wireless Security"],
	/*["wlsche5G", "wlScheEdit5G.htm", 2, "Wireless Schedule"],*/
	["wlacl5g", "wlAcl5G.htm", 2, "Wireless MAC Filtering"],
	["wladv5g", "wlAdv5G.htm", 2, "Wireless Advanced"],
	["wlstat5g", "wlStats5G.htm", 2, "Wireless Statistics"],
	
/*	["wlguest5G", "wlGuest5G.htm", 1, "Guest Network"],
	["wlguestBasic5g", "wlGuest5G.htm", 2, "Basic Settings"],
	["wlguestStats5g", "wlGuestStats5G.htm", 2, "Guest Network Status"],*/
	["wlguest", "wlGuest.htm", 1, "Guest Network"],
	/*["wlguestStats", "wlGuestStats.htm", 2, "Guest Network Status"],*/

	["voip", "voice_account.htm", 1, "Voice"],
	["sipac", "voice_account.htm", 2, "SIP Account"],
	["dialplan", "voice_dialplan.htm", 2, "Dial Plan"],
	["planlist", "voice_dialplan.htm", 3, "Dial Plan List"],
	["fbdcall", "voice_forbiddencall.htm", 3, "Forbidden Call"],
	["emgcall", "voice_emergencycall.htm", 3, "Emergency Call"],
	["sip", "voice_line.htm", 2, "Phone Setup"],
	["sipadv", "voice_advance.htm", 2, "Advanced Setup"],
	["spddial", "voice_speeddial.htm", 2, "Speed Dial"],
	["calllog", "voice_calllog.htm", 2, "Call Log"],
	["callfw", "voice_firewall.htm", 2, "Call Firewall"],
	["callfwmod", "voice_firewall.htm", 3, "Mode Setting"],
	["callfwbl", "voice_blacklist.htm", 3, "Black List"],
	["callfwwl", "voice_whitelist.htm", 3, "White List"],
	["usbmail", "voice_usbmail.htm", 2, "USB Voice Mail"],
	["featurecode", "voice_featurecode.htm", 2, "Feature Code Setting"],

	["dhcp", "dhcp.htm", 1, "DHCP Server"],
	["dhcpserver", "dhcp.htm", 2, "DHCP Settings"],
	["dhcpclient", "dhcpClient.htm", 2, "DHCP Clients List"],
	["addrresrv", "dhcpStatic.htm", 2, "Address Reservation"],
/*	["condpool", "dhcpCond.htm", 2, "Conditional Pool"],*/

	["usb", "usbManage.htm", 1, "USB Settings"],
	["usbmanage", "usbManage.htm", 2, "USB Mass Storage"],
	["usbac", "usbUserAccount.htm", 2, "User Accounts"],
	["samba", "usbSmbSrv.htm", 2, "Storage Sharing"],
	["ftp", "ftpSrv.htm", 2, "FTP Server"],
	["dlna", "dlnaManage.htm", 2, "Media Server"],
	["printer", "printSrv.htm", 2, "Print Server"],

	/*["hw_nat", "hw_nat.htm", 1, "NAT"],*/

	["fwd", "virtualServer.htm", 1, "Forwarding"],
	["vs", "virtualServer.htm", 2, "Virtual Server"],
	["pt", "portTrigger.htm", 2,  "Port Triggering"],
	["dmz", "dmz.htm", 2, "DMZ"],
	["upnp", "upnp.htm", 2, "UPnP"],

	["security", "basicSec.htm", 1, "Security"],
	["basicSec", "basicSec.htm", 2, "Basic Security"],
	["ddos", "ddos.htm", 2, "Advanced Security"],
	["local", "local.htm", 2, "Local Management"],
	["Remote", "remote.htm", 2, "Remote Management"],

	["pc", "parentCtrl.htm", 1, "Parent Control"],

	["fw", "fwRules.htm", 1, "Access Control"],
	["fwrule", "fwRules.htm", 2, "Rule"],
	["fwlan", "fwLan.htm", 2, "Host"],
	["fwwan", "fwWan.htm", 2, "Target"],
	["fwsch", "fwSche.htm", 2, "Schedule"],

/*	["fw6", "fw6Rules.htm", 1,  "IPv6 Firewall"],
	["fw6rule", "fw6Rules.htm", 2,  "IPv6 Rule"],
	["fw6lan", "fw6Lan.htm", 2,  "IPv6 LAN Host"],
	["fw6wan", "fw6Wan.htm", 2,  "IPv6 WAN Host"],
	["fw6sch", "fw6Sche.htm", 2,  "IPv6 Schedule"],*/

	["router", "route.htm", 1, "Advanced Routing"],
/*	["gw", "defGateway.htm", 2, "Default Gateway"],*/
	["rt", "route.htm", 2, "Static Route List"],
	["routetbl", "routeTbl.htm", 2, "System Routing Table"],
/*	["rip", "rip.htm", 2, "RIP Settings"],*/
	
/*	["router6", "defGateway6.htm", 1, "IPv6 Route Settings" ],
	["gw6", "defGateway6.htm", 2, "IPv6 Default Gateway"],
	["rt6", "route6.htm", 2, "IPv6 Static Route"],*/

	["qos", "qos.htm", 1, "Quality of Service"],
	["qosbasic", "qos.htm", 2, "Basic Settings"],
	["qoslist", "qosList.htm", 2, "SP/WRR Settings"],
	["tclist", INCLUDE_QOS ? "trafficCtrl.htm" : "no.htm", 2, "Bandwidth Control"],

	["tc", INCLUDE_QOS ? "no.htm" : "trafficCtrl.htm", 1, "Bandwidth Control"],
		
	["arp", "arpBind.htm", 1, "IP & MAC Binding"],
	["arpbind", "arpBind.htm", 2, "Binding Settings"],
	["arplist", "arpList.htm", 2, "ARP List"],
	
	["ddns", "phDDNS.htm", 1, "Dynamic DNS"],

	["ipv6", "status6.htm", 1, "IPv6"],
	["status6", "status6.htm", 2, "IPv6 Status"],
	["wan6", "ethWan6.htm", 2, "IPv6 WAN"],
	["lan6", "lan6.htm", 2, "IPv6 LAN"],
/*	["tunnel6", "tunnel6.htm", 2,  "IPv6 Tunnel"],*/

	["tools", "time.htm", 1, "System Tools"],
	["time", "time.htm", 2, "Time Settings"],
	["diag", "pingNTraceRoute.htm", 2, "Diagnostic"],
	["cwmp", INCLUDE_CWMP ? "cwmp.htm" : "no.htm", 2, "CWMP"],
	["softup", "softup.htm", 2, "Firmware Upgrade"],
	["def", "defaultCfg.htm", 2, "Factory Defaults"],
	["bnr", "backNRestore.htm", 2, "Backup & Restore"],
	["restart", "restart.htm", 2, "Reboot"],
	["mcl", "password.htm", 2, "Password"],
	["log", "log.htm", 2, "System Log"],
	["stat", "stat.htm", 2, "Statistics"]
);

var menuLiSelStk = new Array();
var menuUlDspStk = new Array();
function menuClick(obj)
{
	var expr = /\bml(\d)\b/;
	var ret;
	var curLv;

	ret = expr.exec(obj.parentNode.className);
	if (ret && ret[1])
	{
		curLv = parseInt(ret[1], 10);
		$.addClass(obj.parentNode, "sel");
	}
	
	while(curLv <= menuLiSelStk.length)
	{
		ret = menuLiSelStk.pop();
		$.removeClass(ret, "sel");
		if (ret && ret.parentNode && ret.parentNode != obj.parentNode )
		{
			$.removeClass(ret.parentNode, "sel");
		}
		if(ret.className == "T minus")
		{
			$.removeClass(ret, "minus");
			$.addClass(ret, "plus");
		}
	}
	
	while(curLv <= menuUlDspStk.length)
	{
		$.addClass(menuUlDspStk.pop(), "nd");
	}
	
	$.addClass(obj, "sel");
	menuLiSelStk.push(obj);
	
	if (obj.nextSibling)
	{
		$.removeClass(obj, "plus");
		$.addClass(obj, "minus");
		var ulObj = obj.nextSibling;
		$.removeClass(ulObj, "nd");
		menuUlDspStk.push(ulObj);
		
		var child = obj.nextSibling.firstChild.firstChild;
		if (child.href == obj.href)
		{
			menuClick(child);
			return false;
		}
	}
	
	parent.frames["mainFrame"].$.loadMain(obj.href.match(/\#__(\w+\.htm)\/?$/)[1]);
	return false;
}

function logoutClick()
{
	if (confirm(c_str.logout))
	{
		
		$.act(ACT_CGI, "/cgi/logout");
		$.exe();
		$.deleteCookie("Authorization");
		window.parent.$.refresh();
		
		//window.parent.location.href="./frame/login.htm";
	}
	return false;
}

</script>

<script language="javascript" type="text/javascript">
(function ()
{
	var curLv = 0;
	var lvStack = new Array();
	var expr = /\w+.htm$/;
	var ret;
	var prev = $.id("menu");
	var obj;
	var flagSepc = 1;
	
	//$.cgi("./frame/menu.cgi",null,function(err)
	$.cgi("./xml/menuList.txt",null,function(err)
	{
		if (err) return;
		for (var i = 0, l = menulist.length; i < l; i++)
		{
			if (!$.local)
			{
				if ((clientLocal == 0) && ( (menulist[i] == "softup.htm") || 
                                            (menulist[i] == "backNRestore.htm") || 
                                            (menulist[i] == "password.htm") ||
                                            (menulist[i] == "defaultCfg.htm")))
				{
					continue;
				}
			}
			
			ret = expr.exec(menulist[i]);
			if (ret)
				menulist[i] = ret[0];
			else
				menulist[i] = undefined;
		}

		for (var j = 0, m = menuargs.length; j < m; j++)
		{
			if (menuargs[j][2] <= 0 || menuargs[j][2] > curLv+1)
				continue;
			
			if (!$.local)
			{
				if ((clientLocal == 0) && ( (menuargs[j][1] == "softup.htm") || 
                                            (menuargs[j][1] == "backNRestore.htm") || 
                                            (menuargs[j][1] == "password.htm") ||
                                            (menuargs[j][1] == "defaultCfg.htm")))
				{
					continue;
				}
			}
				
			for (var i = 0, l = menulist.length; i < l; i++)
			{
				if (menulist[i] == menuargs[j][1])
				{	
					obj = "<li class='ml"+ menuargs[j][2] +"'><a href='#__" + menuargs[j][1]+"' id='menu_"+menuargs[j][0]+"' onclick='return menuClick(this);' "+(menu_str&&menu_str[menuargs[j][0]]?"class='T'><span>"+(menuargs[j][2] > 1?"- ":"") +menu_str[menuargs[j][0]]:">"+(menuargs[j][2] > 1?"- ":"")+menuargs[j][3])+"</span></a></li>";
					if ( ( j + 1 >= menuargs.length  && menuargs[j][2] > 1)||( j + 1 < menuargs.length && menuargs[j][2] > menuargs[j+1][2]))
					{
						obj = "<li class='ml"+ menuargs[j][2] +" last-tag'><a href='#__" + menuargs[j][1]+"' id='menu_"+menuargs[j][0]+"' onclick='return menuClick(this);' "+(menu_str&&menu_str[menuargs[j][0]]?"class='T'><span>"+(menuargs[j][2] > 1?"- ":"") +menu_str[menuargs[j][0]]:">"+(menuargs[j][2] > 1?"- ":"")+menuargs[j][3])+"</span></a></li>";
					}
					if (flagSepc == 1 && menulist[i] == "macClone.htm")
					{
						if (INCLUDE_IPSEC == undefined)
						{
						    obj = "<li class='ml"+ menuargs[j][2] +" last-tag'><a href='#__" + menuargs[j][1]+"' id='menu_"+menuargs[j][0]+"' onclick='return menuClick(this);' "+(menu_str&&menu_str[menuargs[j][0]]?"class='T'><span>"+(menuargs[j][2] > 1?"- ":"") +menu_str[menuargs[j][0]]:">"+(menuargs[j][2] > 1?"- ":"")+menuargs[j][3])+"</span></a></li>";		
						}	
                                                flagSepc = 0;	
					}
					if (menuargs[j][2] == curLv)   /*the first level */
					{
						$.append(lvStack[curLv - 1], obj);
					}
					else if (menuargs[j][2] == curLv+1) /*the seconde level */
					{
						
						$.addClass(prev.firstChild, "plus");
						$.append(prev, "<ul class='mu"+menuargs[j][2]+(curLv==0?"":" nd")+"'></ul>");
						$.append(prev.lastChild, obj);
						lvStack.push(prev.lastChild);
						curLv++;
					}
					else
					{
						while (menuargs[j][2] < curLv)
						{
							lvStack.pop();
							curLv--;
						}
						$.append(lvStack[curLv - 1], obj);
					}
					prev = lvStack[curLv - 1].lastChild;
				
					break;
				}
			}
		}		
	$.append($.id("menu").lastChild, "<li class='ml1'><a href='#' id='menu_logout' onclick='return logoutClick();' class='T'>"+menu_str['logout']+"</a></li>");	
	}, true);	
})();
</script>